(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{44:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(22),r=a.n(n),c=(a(44),a(10)),i=a(11),o=a(13),l=a(12),d=a(4),h=a(3),j=a(24),b=a(19),u=a.n(b),p=function(e){e?u.a.defaults.headers.common.Authorization=e:delete u.a.defaults.headers.common.Authorization},m="GET_ERRORS",O="USER_LOADING",x="SET_CURRENT_USER",v=function(e){return{type:x,payload:e}},f=function(){return function(e){localStorage.removeItem("jwtToken"),p(!1),e(v({}))}},g=a(14),w=a(20),y=a(37),N=a(15),k=a(67),C={isAuthenticated:!1,user:{},loading:!1},S={},R=Object(w.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(N.a)(Object(N.a)({},e),{},{isAuthenticated:!k(t.payload),user:t.payload});case O:return Object(N.a)(Object(N.a)({},e),{},{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return t.payload;default:return e}}}),L=[y.a],A=Object(w.d)(R,{},Object(w.c)(w.a.apply(void 0,L))),T=a(1),E=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(T.jsx)("div",{className:"navbar-fixed",children:Object(T.jsx)("nav",{className:"z-depth-0",children:Object(T.jsx)("div",{className:"nav-wrapper white",children:Object(T.jsxs)(d.b,{to:"/",style:{fontFamily:"monospace"},className:"col s5 brand-logo center black-text",children:[Object(T.jsx)("i",{className:"material-icons",children:"code"}),"MERN"]})})})})}}]),a}(s.Component),U=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(T.jsx)("div",{style:{height:"75vh"},className:"container valign-wrapper",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col s12 center-align",children:[Object(T.jsx)(d.b,{to:"/register",style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Register"}),Object(T.jsx)(d.b,{to:"/login",style:{marginLeft:"2rem",width:"150px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect white hoverable black-text",children:"Log In"})]})})})}}]),a}(s.Component),D=a(18),F=a(16),_=a.n(F),I=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).onChange=function(e){s.setState(Object(D.a)({},e.target.id,e.target.value))},s.onSubmit=function(e){e.preventDefault();var t={name:s.state.name,email:s.state.email,password:s.state.password,password2:s.state.password2};s.props.registerUser(t,s.props.history)},s.state={name:"",email:"",password:"",password2:"",errors:{}},s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col s8 offset-s2",children:[Object(T.jsxs)(d.b,{to:"/",className:"btn-flat waves-effect",children:[Object(T.jsx)("i",{className:"material-icons left",children:"keyboard_backspace"})," Back to home"]}),Object(T.jsxs)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:[Object(T.jsxs)("h4",{children:[Object(T.jsx)("b",{children:"Register"})," below"]}),Object(T.jsxs)("p",{className:"grey-text text-darken-1",children:["Already have an account? ",Object(T.jsx)(d.b,{to:"/login",children:"Log in"})]})]}),Object(T.jsxs)("form",{noValidate:!0,onSubmit:this.onSubmit,children:[Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.name,error:e.name,id:"name",type:"text",className:_()("",{invalid:e.name})}),Object(T.jsx)("label",{htmlFor:"name",children:"Name"}),Object(T.jsx)("span",{className:"red-text",children:e.name})]}),Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:_()("",{invalid:e.email})}),Object(T.jsx)("label",{htmlFor:"email",children:"Email"}),Object(T.jsx)("span",{className:"red-text",children:e.email})]}),Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:_()("",{invalid:e.password})}),Object(T.jsx)("label",{htmlFor:"password",children:"Password"}),Object(T.jsx)("span",{className:"red-text",children:e.password})]}),Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,id:"password2",type:"password",className:_()("",{invalid:e.password2})}),Object(T.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(T.jsx)("span",{className:"red-text",children:e.password2})]}),Object(T.jsx)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:Object(T.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Sign up"})})]})]})})})}}]),a}(s.Component),P=Object(g.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){u.a.post("/api/users/register",e).then((function(e){return t.push("/login")})).catch((function(e){return a({type:m,payload:e.response.data})}))}}})(Object(h.g)(I)),B=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).onChange=function(e){s.setState(Object(D.a)({},e.target.id,e.target.value))},s.onSubmit=function(e){e.preventDefault();var t={email:s.state.email,password:s.state.password};s.props.loginUser(t)},s.state={email:"",password:"",errors:{}},s}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return Object(T.jsx)("div",{className:"container",children:Object(T.jsx)("div",{style:{marginTop:"4rem"},className:"row",children:Object(T.jsxs)("div",{className:"col s8 offset-s2",children:[Object(T.jsxs)(d.b,{to:"/",className:"btn-flat waves-effect",children:[Object(T.jsx)("i",{className:"material-icons left",children:"keyboard_backspace"})," Back to home"]}),Object(T.jsxs)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:[Object(T.jsxs)("h4",{children:[Object(T.jsx)("b",{children:"Login"})," below"]}),Object(T.jsxs)("p",{className:"grey-text text-darken-1",children:["Don't have an account? ",Object(T.jsx)(d.b,{to:"/register",children:"Register"})]})]}),Object(T.jsxs)("form",{noValidate:!0,onSubmit:this.onSubmit,children:[Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:_()("",{invalid:e.email||e.emailnotfound})}),Object(T.jsx)("label",{htmlFor:"email",children:"Email"}),Object(T.jsxs)("span",{className:"red-text",children:[e.email,e.emailnotfound]})]}),Object(T.jsxs)("div",{className:"input-field col s12",children:[Object(T.jsx)("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:_()("",{invalid:e.password||e.passwordincorrect})}),Object(T.jsx)("label",{htmlFor:"password",children:"Password"}),Object(T.jsxs)("span",{className:"red-text",children:[e.password,e.passwordincorrect]})]}),Object(T.jsx)("div",{className:"col s12",style:{paddingLeft:"11.250px"},children:Object(T.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Login"})})]})]})})})}}]),a}(s.Component),W=Object(g.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:function(e){return function(t){u.a.post("/api/users/login",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),p(a);var s=Object(j.a)(a);t(v(s))})).catch((function(e){return t({type:m,payload:e.response.data})}))}}})(B),z=a(39),G=["component","auth"],M=Object(g.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,s=Object(z.a)(e,G);return Object(T.jsx)(h.b,Object(N.a)(Object(N.a)({},s),{},{render:function(e){return!0===a.isAuthenticated?Object(T.jsx)(t,Object(N.a)({},e)):Object(T.jsx)(h.a,{to:"/login"})}}))})),J=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).onLogoutClick=function(t){t.preventDefault(),e.props.logoutUser()},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.auth.user;return Object(T.jsx)("div",{style:{height:"75vh"},className:"container valign-wrapper",children:Object(T.jsx)("div",{className:"row",children:Object(T.jsxs)("div",{className:"col s12 center-align",children:[Object(T.jsxs)("h4",{children:["Good to see you, ",Object(T.jsx)("b",{children:e.name.split(" ")[0]})]}),Object(T.jsx)("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:this.onLogoutClick,className:"btn btn-large waves-effect waves-light hoverable blue accent-3",children:"Logout"})]})})})}}]),a}(s.Component),V=Object(g.b)((function(e){return{auth:e.auth}}),{logoutUser:f})(J);if(localStorage.jwtToken){var $=localStorage.jwtToken;p($);var q=Object(j.a)($);A.dispatch(v(q));var H=Date.now()/1e3;q.exp<H&&(A.dispatch(f()),window.location.href="./login")}var K=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(T.jsx)(g.a,{store:A,children:Object(T.jsx)(d.a,{children:Object(T.jsxs)("div",{className:"App",children:[Object(T.jsx)(E,{}),Object(T.jsx)(h.b,{exact:!0,path:"/",component:U}),Object(T.jsx)(h.b,{exact:!0,path:"/register",component:P}),Object(T.jsx)(h.b,{exact:!0,path:"/login",component:W}),Object(T.jsx)(h.d,{children:Object(T.jsx)(M,{exact:!0,path:"/dashboard",component:V})})]})})})}}]),a}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(T.jsx)(K,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[71,1,2]]]);
//# sourceMappingURL=main.a9534f5d.chunk.js.map